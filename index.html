<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Work Calendar</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-white min-h-screen p-6">

    <h2 class="text-xl font-semibold mb-4">Add Work Calendar</h2>

    <div class="flex items-center mb-4">
        <input id="halfWeekend" type="checkbox" class="mr-2 w-4 h-4 border-gray-400 rounded" />
        <label for="halfWeekend" class="text-gray-700 font-medium">Half working day & half weekend</label>
    </div>

    <!-- Card around the "table" -->
    <div class="p-4 bg-[#edf0f4] rounded-[10px] w-full">

        <!-- Header Row -->
        <div class="grid grid-cols-[1fr,auto,1fr,1fr,1fr,1fr,1fr] gap-2 items-center">
            <div class="h-16 flex items-center justify-center text-gray-600 mr-4"></div>
            <div class="h-16 flex items-center justify-center text-gray-600 px-7">All</div>
            <div class="h-16 flex items-center justify-center text-gray-600">1st</div>
            <div class="h-16 flex items-center justify-center text-gray-600">2nd</div>
            <div class="h-16 flex items-center justify-center text-gray-600">3rd</div>
            <div class="h-16 flex items-center justify-center text-gray-600">4th</div>
            <div class="h-16 flex items-center justify-center text-gray-600">5th</div>
        </div>

        <!-- Days Rows -->
        <div id="calendarBody" class="space-y-2"></div>
    </div>

    <!-- Buttons -->
    <div class="flex justify-end mt-6 space-x-2">
        <button class="px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 transition">Cancel</button>
        <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">Save</button>
    </div>

    <script>
        const days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
        const weeks = ["All", "1st", "2nd", "3rd", "4th", "5th"];
        const body = document.getElementById("calendarBody");
        const halfWeekendToggle = document.getElementById("halfWeekend");

        // Build calendar rows
        days.forEach(day => {
                    const row = document.createElement("div");
                    row.className = "grid grid-cols-[1fr,auto,1fr,1fr,1fr,1fr,1fr] gap-2";
                    row.innerHTML = `
        <div class="h-16 flex items-center text-left font-medium text-gray-700 border rounded-[6px] px-4 bg-white mr-6">${day}</div>
        ${weeks.map((week, index) => `
          <div class="h-16 flex items-center justify-center border rounded-[6px] bg-gray-50 px-7 hover:bg-gray-100 transition">
            <input type="checkbox" class="custom-checkbox w-5 h-5 border-2 shadow-sm rounded-md text-blue-900 focus:outline-none cursor-pointer transition"/>
            
            ${index > 0 ? `
            <div class="relative inline-block w-28 ml-3 hidden">
              <button type="button"
                class="w-full flex justify-between items-center px-2 py-1 text-sm bg-white border rounded-[6px] shadow-sm text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"
                onclick="toggleDropdown(this)">
                <span>Full Day</span>
                <svg class="w-4 h-4 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none"
                  viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M19 9l-7 7-7-7" />
                </svg>
              </button>
              <div class="hidden absolute z-10 mt-1 w-full bg-white border rounded-[6px] shadow-lg">
                <ul class="text-sm text-gray-700">
                  <li class="px-3 py-2 hover:bg-[#edf0f4] cursor-pointer" onclick="selectOption(this)">Full Day</li>
                  <li class="px-3 py-2 hover:bg-[#edf0f4] cursor-pointer" onclick="selectOption(this)">1st Half</li>
                  <li class="px-3 py-2 hover:bg-[#edf0f4] cursor-pointer" onclick="selectOption(this)">2nd Half</li>
                </ul>
              </div>
            </div>` : ''}
          </div>
        `).join('')}
      `;
        body.appendChild(row);
    });

    // Function to toggle dropdown menu visibility
    function toggleDropdown(button) {
        const menu = button.nextElementSibling;
        menu.classList.toggle("hidden");
    }

    function selectOption(option) {
        const btn = option.closest("div").previousElementSibling;
        btn.querySelector("span").textContent = option.textContent;
        option.closest("div").classList.add("hidden");
    }

    // Open/close all dropdowns when halfWeekend checkbox changes
    halfWeekendToggle.addEventListener("change", function () {
        const showDropdowns = this.checked;
        document.querySelectorAll("#calendarBody .relative").forEach(dropdown => {
            if (showDropdowns) {
                dropdown.classList.remove("hidden");
            } else {
                dropdown.classList.add("hidden");
            }
        });
    });

    // Handle "All" checkbox row selection
    document.querySelectorAll("#calendarBody").forEach(rowContainer => {
        rowContainer.addEventListener("change", (e) => {
            if (e.target.closest("div") && e.target.type === "checkbox") {
                const row = e.target.closest(".grid");
                const checkboxes = row.querySelectorAll("input[type='checkbox']");
                const allCheckbox = checkboxes[0]; // First checkbox is "All"
                if (e.target === allCheckbox) {
                    // Toggle all others
                    checkboxes.forEach((cb, idx) => {
                        if (idx > 0) cb.checked = allCheckbox.checked;
                    });
                } else {
                    // If any individual checkbox unchecked, uncheck "All"
                    if (!e.target.checked) allCheckbox.checked = false;
                    // If all individual checked, check "All"
                    const allChecked = Array.from(checkboxes).slice(1).every(cb => cb.checked);
                    allCheckbox.checked = allChecked;
                }
            }
        });
    });

    // Close dropdown when clicking outside
    document.addEventListener("click", (e) => {
        document.querySelectorAll("[onclick='toggleDropdown(this)']").forEach(btn => {
            const menu = btn.nextElementSibling;
            if (!btn.contains(e.target) && !menu.contains(e.target)) {
                menu.classList.add("hidden");
            }
        });
    });
    </script>


</body>

</html>